<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Catalog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <style>
    :root { --ink:#0d141c }
    body { font-family: 'Inter', sans-serif; }
    .card { border:1px solid #e5e7eb; border-radius: .75rem; overflow:hidden; background:#fff; }
    .thumb { width:100%; aspect-ratio:16/9; object-fit:cover; display:block; }
    .tag { display:inline-flex; align-items:center; padding:.25rem .6rem; border:1px solid #e5e7eb; border-radius:9999px; font-size:.75rem; background:#f8fafc; }
  </style>
</head>
<body class="min-h-screen bg-slate-100 text-[var(--ink)]">
  <!-- Einheitlicher Header via nav.js -->
  <div id="global-header"></div>
  <script src="assets/js/nav.js"></script>

  <main class="p-6">
    <h2 class="text-2xl font-semibold mb-4">Catalog</h2>

    <!-- Such-/Filterleiste -->
    <section class="bg-white border rounded-xl shadow p-4 mb-6">
      <div class="grid gap-3 md:grid-cols-[1fr,1fr,1fr,1fr,auto]">
        <label class="flex items-stretch rounded-lg overflow-hidden">
          <span class="px-3 bg-slate-100 flex items-center text-slate-600">ðŸ”Ž</span>
          <input id="filterSearch" class="flex-1 border-0 bg-slate-100 focus:ring-0" placeholder="Suchen: Assets, Templates, Creatorâ€¦" data-persist="catalog.search">
        </label>

        <select id="filterCategory" class="w-full" data-persist="catalog.category">
          <option value="">Kategorie: Alle</option>
          <option value="template">Template</option>
          <option value="asset">Asset</option>
          <option value="model">Model</option>
        </select>

        <select id="filterStyle" class="w-full" data-persist="catalog.style">
          <option value="">Stil: Alle</option>
          <option value="minimal">Minimal</option>
          <option value="cinematic">Cinematic</option>
          <option value="retro">Retro</option>
          <option value="vibrant">Vibrant</option>
        </select>

        <select id="filterOrientation" class="w-full" data-persist="catalog.orientation">
          <option value="">Orientation: Alle</option>
          <option value="16:9">16:9</option>
          <option value="9:16">9:16</option>
          <option value="1:1">1:1</option>
        </select>

        <div class="flex gap-2">
          <button id="btnApply" class="px-4 py-2 rounded-lg border bg-black text-white">Anwenden</button>
          <button id="btnReset" class="px-4 py-2 rounded-lg border">Reset</button>
        </div>
      </div>
    </section>

    <!-- Ergebnisliste -->
    <section id="grid" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      <!-- Karten werden per JS gefiltert; Demo-Items unten -->
    </section>

    <!-- Leerer Zustand -->
    <p id="empty" class="hidden text-slate-500 text-sm mt-4">Keine Treffer. PrÃ¼fe Filter oder suche anders.</p>
  </main>

  <script>
    // Demo-Daten (kannst du durch API-Daten ersetzen)
    const ITEMS = [
      {
        id: "tpl-001",
        title: "Modern Business Presentation",
        subtitle: "Presentation Template",
        category: "template",
        style: "minimal",
        orientation: "16:9",
        img: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=900&auto=format&fit=crop"
      },
      {
        id: "ast-101",
        title: "Gradient Background Pack",
        subtitle: "Graphic Asset",
        category: "asset",
        style: "vibrant",
        orientation: "16:9",
        img: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=900&auto=format&fit=crop"
      },
      {
        id: "mdl-201",
        title: "Photo Model: Ava",
        subtitle: "Portrait Model",
        category: "model",
        style: "cinematic",
        orientation: "9:16",
        img: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=900&auto=format&fit=crop"
      },
      {
        id: "tpl-002",
        title: "Retro Poster Set",
        subtitle: "Poster Template",
        category: "template",
        style: "retro",
        orientation: "1:1",
        img: "https://images.unsplash.com/photo-1499084732479-de2c02d45fc4?q=80&w=900&auto=format&fit=crop"
      },
      {
        id: "ast-102",
        title: "Film Grain Overlay",
        subtitle: "Graphic Asset",
        category: "asset",
        style: "cinematic",
        orientation: "16:9",
        img: "https://images.unsplash.com/photo-1517816743773-6e0fd518b4a6?q=80&w=900&auto=format&fit=crop"
      },
      {
        id: "mdl-202",
        title: "Photo Model: Leo",
        subtitle: "Portrait Model",
        category: "model",
        style: "minimal",
        orientation: "9:16",
        img: "https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=900&auto=format&fit=crop"
      }
    ];

    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');
    const filterSearch = document.getElementById('filterSearch');
    const filterCategory = document.getElementById('filterCategory');
    const filterStyle = document.getElementById('filterStyle');
    const filterOrientation = document.getElementById('filterOrientation');

    function cardHTML(item){
      return `
        <article class="card hover:shadow transition">
          <img class="thumb" src="${item.img}" alt="">
          <div class="p-3">
            <h4 class="font-semibold leading-tight">${item.title}</h4>
            <p class="text-sm text-slate-600">${item.subtitle}</p>
            <div class="mt-2 flex gap-2 flex-wrap">
              <span class="tag">${item.category}</span>
              <span class="tag">${item.style}</span>
              <span class="tag">${item.orientation}</span>
            </div>
            <div class="mt-3 flex gap-2">
              <a class="px-3 py-1.5 rounded-lg border text-sm" href="create.html?from=${encodeURIComponent(item.id)}">Verwenden</a>
              <a class="px-3 py-1.5 rounded-lg border text-sm" href="gallery.html?focus=${encodeURIComponent(item.id)}">Ansehen</a>
            </div>
          </div>
        </article>`;
    }

    function render(list){
      grid.innerHTML = list.map(cardHTML).join("");
      empty.classList.toggle('hidden', list.length !== 0);
    }

    function applyFilters(){
      const q = (filterSearch.value || "").trim().toLowerCase();
      const c = filterCategory.value;
      const s = filterStyle.value;
      const o = filterOrientation.value;

      const res = ITEMS.filter(it => {
        if (c && it.category !== c) return false;
        if (s && it.style !== s) return false;
        if (o && it.orientation !== o) return false;
        if (q && !(it.title.toLowerCase().includes(q) || it.subtitle.toLowerCase().includes(q))) return false;
        return true;
      });
      render(res);
    }

    // Wire up
    document.getElementById('btnApply').addEventListener('click', applyFilters);
    document.getElementById('btnReset').addEventListener('click', ()=>{
      filterSearch.value = "";
      filterCategory.value = "";
      filterStyle.value = "";
      filterOrientation.value = "";
      applyFilters();
    });

    // Sofort initial befÃ¼llen
    render(ITEMS);
    // Live-Filter bei Enter
    filterSearch.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ applyFilters(); } });
  </script>
</body>
</html>
